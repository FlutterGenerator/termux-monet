buildscript {
    repositories {
        mavenCentral()
        google()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:8.12.0'
    }
}

allprojects {
    repositories {
        google()
        mavenCentral()
        maven { url = "https://jitpack.io" }
    }

    // üîπ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—è–∑–≤–∏–º—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
    configurations.all {
        resolutionStrategy.eachDependency { details ->

            // ‚úÖ Netty (—Ñ–∏–∫—Å CVE, >= 4.1.118.Final)
            if (details.requested.group == "io.netty" &&
                (details.requested.name == "netty-handler" ||
                 details.requested.name == "netty-codec-http" ||
                 details.requested.name == "netty-codec-http2" ||
                 details.requested.name == "netty-common")) {
                details.useVersion "4.1.118.Final"
            }

            // ‚úÖ Apache Commons Compress (—Ñ–∏–∫—Å CVE, >= 1.26.0)
            if (details.requested.group == "org.apache.commons" &&
                details.requested.name == "commons-compress") {
                details.useVersion "1.26.0"
            }

            // ‚úÖ Google Protobuf (—Ñ–∏–∫—Å CVE-2024-7254, >= 3.25.5)
            if (details.requested.group == "com.google.protobuf" &&
                (details.requested.name == "protobuf-kotlin" ||
                 details.requested.name == "protobuf-java" ||
                 details.requested.name == "protobuf-javalite" ||
                 details.requested.name == "protobuf-kotlin-lite")) {
                details.useVersion "3.25.5"
            }
        }
    }

    // ‚öôÔ∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞
    tasks.withType(JavaCompile).configureEach {
        options.compilerArgs << "-Xlint:deprecation"
    }

    // üßπ –û—á–∏—Å—Ç–∫–∞ build-–ø–∞–ø–æ–∫
    tasks.withType(Delete).configureEach {
        delete layout.buildDirectory
    }
}
